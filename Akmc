#!/bin/bash

# ParaGOD ASCII Art and Header
echo -e "\n\033[1;36m"
cat << "EOF"

  ____                      ____   ___   ____ 
 |  _ \ __ _ _ __ _ __ ___ |  _ \ / _ \ / ___|
 | |_) / _` | '__| '__/ _ \| | | | | | | |    
 |  __/ (_| | |  | | | (_) | |_| | |_| | |___ 
 |_|   \__,_|_|  |_|  \___/|____/ \___/ \____|
 ðŸ¤ Framework Installer - github.com/ParaGOD

EOF
echo -e "\033[0m"

echo -e "\033[1;34mStarting Installation of Blueprint.zip\033[0m"
echo "-------------------------------------"

# Installation Steps
commands=(
  "sudo apt-get install -y ca-certificates curl gnupg"
  "sudo mkdir -p /etc/apt/keyrings"
  "curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg"
  "echo \"deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_20.x nodistro main\" | sudo tee /etc/apt/sources.list.d/nodesource.list"
  "sudo apt-get update"
  "sudo apt-get install -y nodejs"
  "sudo npm i -g yarn"
  "cd /var/www/pterodactyl"
  "yarn"
  "sudo apt install -y zip unzip git curl wget"
  "wget \"\$(curl -s https://api.github.com/repos/BlueprintFramework/framework/releases/latest | grep 'browser_download_url' | cut -d '\"' -f 4)\" -O release.zip"
  "unzip release.zip"
  "chmod +x blueprint.sh"
  "bash blueprint.sh"
)

# Execute commands with progress
for i in "${!commands[@]}"; do
  echo -e "\033[1;33m[$((i+1))/14] Executing:\033[0m \033[0;35m${commands[$i]}\033[0m"
  eval "${commands[$i]}"
  if [ $? -ne 0 ]; then
    echo -e "\033[1;31mError occurred at step $((i+1)). Aborting installation.\033[0m"
    exit 1
  fi
done

# Completion Message
echo -e "\n\033[1;32m-------------------------------------\033[0m"
echo -e "\033[1;32mBlueprint extensions installed successfully! ðŸŽ‰\033[0m"
echo -e "\033[1;35m           Made by ParaGOD\033[0m"
echo -e "\033[1;35m       github.com/ParaGOD\033[0m"
echo -e "\033[1;32m-------------------------------------\033[0m"
